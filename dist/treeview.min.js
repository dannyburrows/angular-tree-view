!function(){"use strict";function e(){return{restrict:"E",template:'<tree-root root="treeData"></tree-root>',scope:{treeData:"=",selected:"=",expandAll:"=?",collapseAll:"=?"},link:function(e,n){function r(){e.treeData&&angular.isArray(e.treeData)&&e.treeData.forEach(function(e){e.root=!0,e.expanded=!1})}function c(n,r){e.selected=r,e.$broadcast("branch_selected_highlight",{id:r})}function t(){e.treeData.forEach(function(e){i(e,!0)})}function a(){e.treeData.forEach(function(e){i(e,!1)})}function i(e,n){e.expanded=n,e.viewable=n,e.children&&angular.isArray(e.children)&&e.children.forEach(function(e){i(e,n)})}e.selected=-1,e.expandAll=t,e.collapseAll=a,r(),e.$on("branch_selected",c)}}}function n(){return{restrict:"E",template:'<div class="tree-view"><tree-branch ng-repeat="branch in root" branch="branch"></tree-branch></div>',replace:"true",scope:{root:"="}}}function r(e){return{restrict:"E",template:'<div style="cursor: pointer" ng-click="toggle(branch);$event.stopPropagation()" ng-show="branch.viewable || branch.root"><div ng-class="{\'tree-view-selected\': branch.selected}"><span ng-class="{\'glyphicon glyphicon-plus\': !branch.expanded && (branch.children && branch.children.length > 0), \'glyphicon glyphicon-minus\': branch.expanded && (branch.children != null && branch.children.length > 0), \'glyphicon glyphicon-file\': (branch.children == null || branch.children.length == 0)}"></span> {{branch.label}}</div></div>',replace:!0,scope:{branch:"="},link:function(n,r,c){function t(){n.branch&&n.branch.children&&angular.isArray(n.branch.children)&&(r.append('<tree-root root="branch.children"></tree-view>'),e(r.contents())(n))}function a(e,r){n.branch.selected=r.id==n.last_selected}function i(e){e&&(e.viewable=!1,e.children&&angular.isArray(e.children)&&(e.expanded=!1,e.children.forEach(function(e){i(e)})))}function l(e){n.last_selected=e.id,n.$emit("branch_selected",e.id),null!==e.expanded&&(e.expanded=!e.expanded,e.children.forEach(function(n){n.viewable=e.expanded,n.viewable||(o(n,!1),n.expanded=!1)}))}function o(e,n){return!e.children||!angular.isArray(e.children)||e.children.length<=0?!1:e.children.forEach(function(e){return e.expanded=n,e.viewable=n,o(e,n)})}n.toggle=l,n.last_selected=-1,i(n.branch),t(),n.$on("branch_selected_highlight",a)}}}r.$inject=["$compile"],angular.module("monsciergetreeview",[]),angular.module("monsciergetreeview").directive("treeView",e).directive("treeRoot",n).directive("treeBranch",r)}();